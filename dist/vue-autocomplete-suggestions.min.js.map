{"version":3,"file":"vue-autocomplete-suggestions.min.js","sources":["../src/Autocomplete.vue"],"sourcesContent":["<template>\n  <section>\n    <!-- some explanations for the input:\n    1. ':value=\"value\"': Use the received as props\n        for the input element\n\n    2. 'v-bind=\"$attrs\"': Bind attributes like placeholder\n        to the input element instead of the section element\n        (which would be the default)\n\n    3. 'v-on=\"listeners\"': We modify the input listener and\n        emit the input event when someone types something\n        into the input instead of the section element\n        (which would be the default). This allows us to do\n        things like: <vue-autocomplete @input=\"someFunction\">\n    -->\n    <input type=\"text\" :value=\"value\" v-bind=\"$attrs\" v-on=\"listeners\" ref=\"input\" @focus=\"showSuggestions=true\" @keydown.up=\"decrementSelectedIndex\" @keydown.down=\"incrementSelectedIndex\">\n\n    <ul class=\"vue-autocomplete-suggestions\" v-show=\"showSuggestions\">\n      <template v-if=\"suggestions.length>0\">\n        <li v-for=\"(suggestion, index) in suggestions\" :key=\"getSuggestionText(suggestion)\" @click.stop=\"selectSuggestion(suggestion)\" @mouseover=\"selectedIndex=index\" @mouseleave=\"selectedIndex=-1\">\n          <component :is=\"suggestionComponent\" :suggestion=\"suggestion\" :active=\"index===selectedIndex\"></component>\n        </li>\n      </template>\n\n      <template v-else>\n        <li>\n          <slot name=\"noSuggestionFoundComponent\">no suggestion found</slot>\n        </li>\n      </template>\n    </ul>\n  </section>\n</template>\n\n<script>\nexport default {\n  name: 'vue-autocomplete',\n  inheritAttrs: false, // bind attributes to the input tag (see 2.)\n  // directives: {\n  //   clickOutside: {\n  //     bind: function(el, binding, vnode) {\n  //       el.event = function(event) {\n  //         // here I check that click was outside the el and his childrens\n  //         if (!(el == event.target || el.contains(event.target))) {\n  //           // and if it did, call method provided in attribute value\n  //           vnode.context[binding.expression](event)\n  //         }\n  //       }\n  //       document.body.addEventListener('click', el.event)\n  //     },\n  //     unbind: function(el) {\n  //       document.body.removeEventListener('click', el.event)\n  //     },\n  //   },\n  // },\n  props: {\n    value: {\n      type: String,\n      required: true,\n    },\n    suggestions: {\n      type: Array,\n      required: true,\n    },\n    suggestionComponent: {\n      required: true,\n    },\n    /**\n      this function returns the value that will be the value\n      of the input element when the suggestionComponent is clicked.\n      because it is unique, its return value is also used as a key\n      for the suggestion (see <li :key=\"getSuggestionText(suggestion)\">)\n    */\n    getSuggestionText: {\n      type: Function,\n      default: suggestion => JSON.stringify(suggestion),\n    },\n  },\n  data() {\n    return {\n      selectedIndex: -1,\n      showSuggestions: true,\n    }\n  },\n  computed: {\n    // for explanantion see 3.\n    listeners() {\n      return {\n        ...this.$listeners,\n        input: event => this.$emit('input', event.target.value),\n      }\n    },\n  },\n  methods: {\n    hideSuggestions() {\n      this.showSuggestions = false\n      this.selectedIndex = -1\n    },\n    selectSuggestion(suggestion) {\n      this.hideSuggestions()\n      const value = this.getSuggestionText(suggestion)\n      this.$emit('input', value)\n    },\n    incrementSelectedIndex() {\n      this.selectedIndex = Math.min(\n        this.selectedIndex + 1,\n        this.suggestions.length\n      )\n    },\n    decrementSelectedIndex() {\n      this.selectedIndex = Math.max(this.selectedIndex - 1, -1)\n    },\n  },\n}\n</script>\n\n<style>\n/* make suggestions appear under the input (absolute positioned)\n   and remove spacing */\n\nul.vue-autocomplete-suggestions {\n  position: absolute;\n  padding-left: 0;\n  margin-top: 0;\n  margin-bottom: 0;\n}\n\nul.vue-autocomplete-suggestions li {\n  list-style: none;\n  cursor: pointer;\n}\n</style>\n"],"names":["String","Array","Function","JSON","stringify","suggestion","this","$listeners","_this","$emit","event","target","value","showSuggestions","selectedIndex","hideSuggestions","getSuggestionText","Math","min","suggestions","length","max"],"mappings":"6xCAoCQ,iCACQ,qBAoBJA,iBACI,qBAGJC,gBACI,kCAGA,2BASJC,iBACG,mBAAcC,KAAKC,UAAUC,4CAKtB,mBACC,sEAOZC,KAAKC,kBACD,mBAASC,EAAKC,MAAM,QAASC,EAAMC,OAAOC,qDAM9CC,iBAAkB,OAClBC,eAAiB,6BAEPT,QACVU,sBACCH,EAAQN,KAAKU,kBAAkBX,QAChCI,MAAM,QAASG,2CAGfE,cAAgBG,KAAKC,IACxBZ,KAAKQ,cAAgB,EACrBR,KAAKa,YAAYC,gDAIdN,cAAgBG,KAAKI,IAAIf,KAAKQ,cAAgB,GAAI"}