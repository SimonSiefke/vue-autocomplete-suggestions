{"version":3,"file":"vue-autocomplete-suggestions.min.js","sources":["../src/DefaultSuggestionComponent.vue","../src/DefaultSearchField.vue","../src/Autocomplete.vue"],"sourcesContent":["<template>\n  <span>{{ suggestion }}</span>\n</template>\n\n<script lang=\"ts\">\nimport Vue from 'vue'\nexport default Vue.extend({\n  props: {\n    suggestion: {\n      type: [Object, Number, String],\n      required: true,\n    },\n    active: {\n      type: Boolean,\n      required: true,\n    },\n  },\n})\n</script>\n","<template>\n  <div class=\"default-search-field\" :class=\"size\">\n    <input v-bind=\"inputAttributes\">\n  </div>\n</template>\n\n<script lang=\"ts\">\nimport Vue from 'vue'\n\nexport default Vue.extend({\n  inheritAttrs: false,\n  props: {\n    size: {\n      default: 'large',\n      type: String,\n    },\n  },\n  computed: {\n    inputAttributes(): object {\n      return {\n        type: 'text',\n        autocomplete: 'off',\n        ...this.$attrs,\n      }\n    },\n  },\n})\n</script>\n\n\n<style>\n.default-search-field {\n  border: 1px solid #bdbdbd;\n  display: flex;\n}\n.default-search-field > input {\n  border: 0;\n  outline: 0;\n}\n\n.default-search-field.large {\n  height: 35px;\n}\n.default-search-field.large > input {\n  line-height: 15px;\n  font-size: 15px;\n  padding: 6px 10px 6px 0;\n  text-indent: 8px;\n}\n\n.default-search-field.medium {\n  height: 25px;\n}\n.default-search-field.medium > input {\n  line-height: 13px;\n  font-size: 13px;\n  padding: 4px 7px 4px 0;\n  text-indent: 5px;\n}\n\n.default-search-field.small {\n  height: 20px;\n}\n.default-search-field.small > input {\n  line-height: 11px;\n  font-size: 11px;\n  text-indent: 3px;\n}\n</style>\n","<template>\n  <section v-click-outside=\"hideSuggestions\" class=\"vue-autocomplete\">\n    <div ref=\"inputWrapper\" v-on=\"inputListeners\">\n      <slot>\n        <default-search-field />\n      </slot>\n    </div>\n    <ul v-show=\"showSuggestions\" ref=\"suggestions\" class=\"suggestions\">\n      <div class=\"misc-item-above\" v-if=\"this.$slots['misc-item-above']\">\n        <slot :suggestions=\"suggestions\" name=\"misc-item-above\" />\n      </div>\n      <li v-for=\"(suggestion, index) in suggestions\" :key=\"getSuggestionText(suggestion)\" @click=\"selectSuggestion(suggestion)\" @mouseover=\"hoverIndex = index\" :class=\"{'is-hovered': hoverIndex===index}\" @mouseleave=\"hoverIndex = -1\" class=\"search-suggestion\">\n        <slot v-bind=\"{suggestion, active: hoverIndex===index}\" name=\"suggestionComponent\">\n          <default-suggestion-component v-bind=\"{suggestion, active: hoverIndex===index}\" />\n        </slot>\n      </li>\n      <div class=\"misc-item-below\" v-if=\"this.$slots['misc-item-below']\">\n        <slot :suggestions=\"suggestions\" name=\"misc-item-below\" />\n      </div>\n    </ul>\n  </section>\n</template>\n\n<script lang=\"ts\">\nimport Vue, { VNode } from 'vue'\nimport DefaultSuggestionComponent from './DefaultSuggestionComponent.vue'\nimport DefaultSearchField from './DefaultSearchField.vue'\nimport { Prop } from 'vue/types/options'\n\ninterface Data {\n  hoverIndex: number\n  showSuggestions: boolean\n  suggestions: any[]\n  suggestionCache: Cache\n  inputElement: HTMLInputElement | null\n  isMakingRequest: boolean\n}\n\ntype Suggestion = string | object | number\ninterface Cache {\n  [key: string]: any\n}\n\nexport default Vue.extend({\n  name: 'VueAutocomplete',\n  components: {\n    DefaultSuggestionComponent,\n    DefaultSearchField,\n  },\n  directives: {\n    /** detect a click outside of the input and the suggestions\n     to hide the suggestions */\n    clickOutside: {\n      isFn: true,\n      bind(element: any, binding: any, vnode: VNode) {\n        element.event = (event: Event) => {\n          const { inputWrapper, suggestions } = vnode.context!.$refs\n\n          // check if the click was outside the components\n          if (\n            // @ts-ignore\n            !inputWrapper.contains(event.target) &&\n            // @ts-ignore\n            !suggestions.contains(event.target)\n          ) {\n            // if it was, call method provided in attribute value\n            // @ts-ignore\n            vnode.context[binding.expression](event)\n          }\n        }\n        document.body.addEventListener('click', element.event)\n      },\n      unbind(element: any) {\n        document.body.removeEventListener('click', element.event)\n      },\n    },\n  },\n  inheritAttrs: false,\n  props: {\n    cacheResults: {\n      type: Boolean,\n      default: true,\n    },\n    getSuggestionText: {\n      type: Function,\n      default(suggestion: any) {\n        if (typeof suggestion === 'string') {\n          return suggestion\n        }\n        return JSON.stringify(suggestion)\n      },\n    },\n    suggestionSource: {\n      type: [Array, Function],\n      required: true,\n    },\n    value: {\n      type: [String, Number],\n      required: true,\n    },\n  },\n  data(): Data {\n    return {\n      showSuggestions: false,\n      hoverIndex: -1,\n      suggestions: [],\n      // if suggestions source is an async function,\n      // save the result for each input inside this cache\n      suggestionCache: {},\n      inputElement: null,\n      isMakingRequest: false,\n    }\n  },\n  computed: {\n    inputAttributes(): object {\n      return {\n        autocomplete:'off',\n        type:'text',\n        ...this.$attrs,\n        id:'red',\n        // @ts-ignore\n        value: this.value,\n      }\n    },\n    inputComponent(): Vue | undefined {\n      if (this.$slots.default && !!this.$slots.default[0].componentInstance) {\n        return this.$slots.default[0].componentInstance\n      }\n    },\n    inputListeners(): object {\n      const nativeListeners = {\n        ...this.$listeners,\n        click: (event: Event) => {\n          this.handleClick()\n          this.$emit('click', event)\n        },\n        keydown: (event: KeyboardEvent) => {\n          const key = event.keyCode\n          const selectionUpKeys = [33, 38]\n          const selectionDownKeys = [34, 40]\n          const selectKeys = [9, 13, 36]\n          const hideSuggestionsKeys = [27, 35]\n\n          if (selectionUpKeys.includes(key)) {\n            this.handleKeyUp()\n          } else if (selectionDownKeys.includes(key)) {\n            this.handleKeyDown()\n          } else if (selectKeys.includes(key)) {\n            this.handleKeyEnter()\n          } else if (hideSuggestionsKeys.includes(key)) {\n            this.handleKeyEscape()\n          }\n\n          this.$emit('keydown', event)\n        },\n      }\n      // @ts-ignore\n      delete nativeListeners.select\n      return nativeListeners\n    },\n  },\n  watch: {\n    value: {\n      immediate: true,\n      handler(newValue) {\n        if (this.inputElement) {\n          // @ts-ignore\n          this.inputElement.value = this.value\n        }\n        if (newValue === '') {\n          this.showSuggestions = false\n        }\n      },\n    },\n    // TODO: evaluate if this is necessary or can be done with less code\n    suggestionSource: {\n      async handler(newSource) {\n        this.clearCache()\n        console.log('new suggestion source')\n\n        // @ts-ignore\n        try{\n        this.suggestions = await this.getSuggestions()\n        }catch(error){\n          console.error(error)\n        }\n      },\n    },\n  },\n  mounted() {\n    const inputWrapper = this.$refs.inputWrapper as HTMLDivElement\n    this.inputElement = inputWrapper.querySelector('input') as HTMLInputElement\n    // @ts-ignore\n    this.inputElement.value = this.value\n    // @ts-ignore\n    this.inputElement.addEventListener('focus', () => {\n      this.$emit('focus')\n    })\n    this.inputElement.addEventListener('input', (event: Event) => {\n      event.preventDefault()\n      event.stopPropagation()\n      const newValue = (event.target as HTMLInputElement).value\n      // @ts-ignore\n      if (this.value !== newValue) {\n        this.$emit('input', newValue)\n        this.handleInput(newValue)\n      }\n    })\n  },\n  methods: {\n    clearCache() {\n      this.suggestionCache = {}\n    },\n    async getSuggestions(): Promise<Suggestion[]> {\n      // @ts-ignore\n      if (Array.isArray(this.suggestionSource)) {\n        // @ts-ignore\n        return this.suggestionSource\n      }\n\n      // @ts-ignore\n      if (typeof this.suggestionSource === 'function') {\n        // @ts-ignore\n        if (this.cacheResults) {\n          const inputValue = this.inputElement!.value\n          if (this.suggestionCache[inputValue]) {\n            return this.suggestionCache[inputValue]\n          }\n          this.isMakingRequest = true\n          let newSuggestions\n          try {\n          // @ts-ignore\n          newSuggestions = await this.suggestionSource()\n          } catch (error) {\n            console.error(error)\n          }\n          this.isMakingRequest = false\n          this.suggestionCache[inputValue] = newSuggestions\n          return newSuggestions\n        } else {\n          this.isMakingRequest = true\n          let result\n          try {\n          // @ts-ignore\n          result = await this.suggestionSource()\n          } catch (error) {\n            console.error(error)\n          }\n          this.isMakingRequest = false\n          return result\n        }\n      }\n\n      throw new Error('invalid suggestion source')\n    },\n    async handleClick() {\n      // @ts-ignore\n      if (this.value !== '') {\n        this.suggestions = await this.getSuggestions()\n        this.showSuggestions = true\n      }\n    },\n    handleKeyDown() {\n      // if its at the bottom, move to top\n      // if its not at the bottom move down by 1\n      // @ts-ignore\n      this.showSuggestions = true\n      this.hoverIndex = (this.hoverIndex + 1) % this.suggestions.length\n    },\n    handleKeyEnter() {\n      // console.log('eneter')\n\n      const index = this.hoverIndex\n      // @ts-ignore\n      if (0 <= index && index < this.suggestions.length) {\n        // @ts-ignore\n        const currentSuggestion = this.suggestions[index]\n        // TODO: remove side effect\n        this.selectSuggestion(currentSuggestion)\n      }\n    },\n    handleKeyEscape() {\n      this.hideSuggestions()\n      this.inputElement!.blur()\n    },\n    handleKeyUp() {\n      // if its at the top, move to bottom\n      // if its not at the top move up by 1\n      this.hoverIndex =\n        // @ts-ignore\n        (this.hoverIndex - 1 + this.suggestions.length) %\n        // @ts-ignore\n        this.suggestions.length\n    },\n    async handleInput(newValue: string) {\n      console.log('handle input')\n\n      try {\n      this.suggestions = await this.getSuggestions()\n      } catch (error) {\n        console.error(error)\n      }\n      this.showSuggestions = true\n      this.hoverIndex = -1\n    },\n    hideSuggestions() {\n      if (this.showSuggestions) {\n        this.showSuggestions = false\n        this.hoverIndex = -1\n      }\n    },\n    selectSuggestion(suggestion: any) {\n      this.hideSuggestions()\n      // @ts-ignore\n      this.$emit('input', this.getSuggestionText(suggestion))\n      this.$emit('select', suggestion)\n      // @ts-ignore\n      this.inputElement.value = this.getSuggestionText(suggestion)\n      this.inputElement!.blur()\n    },\n  },\n})\n</script>\n\n<style>\n.vue-autocomplete {\n  position: relative;\n}\n\n.vue-autocomplete input {\n  width: 100%;\n  box-sizing: border-box;\n}\n.vue-autocomplete .suggestions {\n  position: absolute;\n  padding-left: 0;\n  margin-top: 0;\n  margin-bottom: 0;\n  width: 100%;\n  z-index: 1;\n  box-sizing: border-box;\n}\n\n.vue-autocomplete .search-suggestion {\n  list-style: none;\n  cursor: pointer;\n  user-select: none;\n  background: #ffffff;\n}\n\n.vue-autocomplete .search-suggestion.is-hovered {\n  background: #e7e7e7;\n}\n\n.vue-autocomplete > ul {\n  border-left: 1px solid #bbb;\n  border-right: 1px solid #bbb;\n  border-bottom: 1px solid #bbb;\n}\n</style>\n"],"names":["extend","render","props","suggestion","type","Object","Number","String","required","active","Boolean","__assign","assign","t","s","i","n","arguments","length","p","prototype","hasOwnProperty","call","Vue","inheritAttrs","size","default","computed","inputAttributes","autocomplete","this","$attrs","__awaiter","thisArg","_arguments","P","generator","Promise","resolve","reject","fulfilled","value","step","next","e","rejected","result","done","then","apply","__generator","body","f","y","g","_","label","sent","trys","ops","verb","throw","return","Symbol","iterator","v","op","TypeError","pop","push","name","components","DefaultSuggestionComponent","DefaultSearchField","directives","clickOutside","isFn","bind","element","binding","vnode","event","_a","context","$refs","inputWrapper","suggestions","contains","target","expression","document","addEventListener","unbind","removeEventListener","cacheResults","getSuggestionText","Function","JSON","stringify","suggestionSource","Array","data","showSuggestions","hoverIndex","suggestionCache","inputElement","isMakingRequest","id","inputComponent","$slots","componentInstance","inputListeners","_this","nativeListeners","$listeners","click","handleClick","$emit","keydown","key","keyCode","includes","handleKeyUp","handleKeyDown","handleKeyEnter","handleKeyEscape","select","watch","immediate","handler","newValue","newSource","error_1","_b","clearCache","console","log","getSuggestions","error","mounted","querySelector","preventDefault","stopPropagation","handleInput","methods","inputValue","newSuggestions","error_2","error_3","isArray","Error","index","currentSuggestion","selectSuggestion","hideSuggestions","blur","error_4"],"mappings":"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"}